(self.webpackChunk_minimal_minimal_kit_react=self.webpackChunk_minimal_minimal_kit_react||[]).push([[707],{24775:function(n,e,t){"use strict";t.d(e,{Ij:function(){return s},Sn:function(){return l},V9:function(){return o},WF:function(){return r},ZA:function(){return a},k:function(){return d}});var i=t(89731),o=function(n){return i.Z.post("stocks/transaction",n)},l=function(n){return i.Z.get("stocks",{params:n})},r=function(n){return i.Z.get("stock-histories",{params:n})},a=function(n){return i.Z.post("stocks/convertion",n)},d=function(n){return i.Z.post("stocks/check/status",n)},s=function(n){return i.Z.post("stocks/check/order-sync",n)}},52094:function(n,e){"use strict";e.Z=function(n){var e=n.condition,t=n.wrapper,i=n.children;return e?t(i):i}},29620:function(n,e,t){"use strict";t.d(e,{Z:function(){return f}});var i=t(74165),o=t(15861),l=t(70885),r=t(36151),a=t(94016),d=t(64802),s=t(72791),c=t(75985),u=t(53026),v=t(22057),x=t(80184),h=function(n){var e=n.documentId,t=n.valueString;return(0,x.jsx)(v.ZP,{id:e,value:t,size:128,bgColor:"#ffffff",fgColor:"#000000",level:"H"})},p=function(n){var e=n.valueStrings,t=n.pdfImageIds;return(0,x.jsx)(a.BB,{children:(0,x.jsx)(a.T3,{size:"A4",style:{paddingTop:"15px"},children:(0,x.jsx)(a.G7,{children:(null===t||void 0===t?void 0:t.length)>0&&(0,x.jsx)(a.G7,{style:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"row",width:"100%",flexWrap:"wrap"},children:null===t||void 0===t?void 0:t.map((function(n,t){return(0,x.jsxs)(a.G7,{style:{margin:"12px",display:"flex",alignItems:"center",justifyContent:"center"},wrap:!1,children:[(0,x.jsx)(a.Ee,{allowDangerousPaths:!0,src:n,style:{width:"60px",height:"60px"}}),(0,x.jsx)(a.xv,{style:{fontSize:"12px",marginTop:"8px"},children:e[t]})]},t)}))})})})})},f=function(n){var e=n.valueStrings,t=n.isLoading,v=n.onClick,f=(n.onClose,n.setIsDownloading),Z=(0,s.useState)(!1),j=(0,l.Z)(Z,2),g=j[0],S=j[1],m=(0,s.useState)(!1),k=(0,l.Z)(m,2),y=k[0],b=k[1],w=function(){var n=(0,o.Z)((0,i.Z)().mark((function n(){var t,o,l,r;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return b(!0),t=null===e||void 0===e?void 0:e.map((function(n){return document.getElementById(n).toDataURL()})),o=(0,x.jsx)(p,{pdfImageIds:t,valueStrings:e}),(l=(0,a.eA)()).updateContainer(o),n.next=7,l.toBlob();case 7:r=n.sent,(0,d.saveAs)(r,"document.pdf"),c.Am.success("Berhasil mendownload PDF"),f(!1),b(!1),S(!1);case 13:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,s.useEffect)((function(){g&&w()}),[g]),(0,s.useEffect)((function(){(null===e||void 0===e?void 0:e.length)>0?S(!0):S(!1)}),[e]),(0,x.jsxs)(x.Fragment,{children:[!t&&(null===e||void 0===e?void 0:e.length)>0&&(null===e||void 0===e?void 0:e.map((function(n,e){return(0,x.jsx)("div",{style:{display:"none"},children:(0,x.jsx)(h,{documentId:n,valueString:n})},e)}))),(0,x.jsx)(r.Z,{variant:"outlined",startIcon:(0,x.jsx)(u.Z,{icon:"eva:download-fill"}),onClick:function(){return!t&&!y&&v()},children:t?"Sedang mengambil data..":y?"Loading document..":"Download PDF"})]})}},76662:function(n,e,t){"use strict";t(72791);var i=t(64554),o=t(11878),l=(t(41758),t(53026),t(80184)),r=function(n){var e=n.open,t=n.onClose,i=n.maxWidth,r=n.children;return(0,l.jsx)(o.Kl,{open:e,onClose:t,maxWidth:i,children:r})};r.Content=function(n){var e=n.children;return(0,l.jsx)(l.Fragment,{children:e})},r.Header=function(n){var e=n.children;return(0,l.jsx)(i.Z,{sx:{flexGrow:1,display:"flex",alignItems:"center"},children:e})},e.Z=r},74384:function(n,e,t){"use strict";t(72791);var i=t(64554),o=t(65661),l=t(11878),r=t(41758),a=(t(53026),t(80184));e.Z=function(n){var e=n.title,t=n.open,d=n.onClose,s=n.maxWidth,c=n.children,u=n.badgeCount,v=n.useBadge,x=n.headerButtonComponent;return(0,a.jsxs)(l.Kl,{open:t,onClose:d,maxWidth:s,children:[(0,a.jsx)(i.Z,{sx:{flexGrow:1,display:"flex",alignItems:"center"},children:(0,a.jsxs)(o.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},children:[(0,a.jsxs)(i.Z,{children:[e," ",v&&(0,a.jsx)(r.Z,{variant:"ghost",color:"error",sx:{marginLeft:"8px"},children:u})]}),x&&x]})}),c]})}},59510:function(n,e,t){"use strict";var i=t(42982),o=t(74165),l=t(15861),r=t(70885),a=t(72791),d=t(9281),s=t(21765),c=t(64554),u=t(65661),v=t(53767),x=t(51603),h=t(20890),p=t(13400),f=t(13967),Z=t(12065),j=t(76662),g=t(53026),S=t(27578),m=t(29620),k=t(94728),y=t(87285),b=t(80184),w=function(n){var e=n.detailLookupStockData,t=n.onClose,i=n.setIsDownloading,d=(0,a.useState)([]),s=(0,r.Z)(d,2),v=s[0],x=s[1],h=(0,a.useState)(!1),p=(0,r.Z)(h,2),f=p[0],Z=p[1],g=function(){var n=(0,l.Z)((0,o.Z)().mark((function n(){var t,i,l,r,a,d,s=arguments;return(0,o.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=s.length>0&&void 0!==s[0]?s[0]:[],l=s.length>1&&void 0!==s[1]?s[1]:1,n.next=4,(0,k.P)({filterProductId:null===e||void 0===e?void 0:e.productId,page:l});case 4:return r=n.sent,a=r.data,d=r.meta,i=i.concat(a),n.abrupt("return",l<(null===d||void 0===d||null===(t=d.info)||void 0===t?void 0:t.totalPage)?g(i,l+1):i);case 9:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),S=function(){var n=(0,l.Z)((0,o.Z)().mark((function n(){var e,t;return(0,o.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i(!0),Z(!0),n.next=4,g();case 4:(e=n.sent)&&(t=null===e||void 0===e?void 0:e.map((function(n){return null===n||void 0===n?void 0:n.code})),x(t)),Z(!1);case 7:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,b.jsx)(j.Z.Header,{children:(0,b.jsx)(c.Z,{sx:{flexGrow:1,display:"flex",alignItems:"center"},children:(0,b.jsxs)(u.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},children:[(0,b.jsx)(c.Z,{children:"Lookup Stok"}),(0,b.jsx)(m.Z,{onClick:S,valueStrings:v,isLoading:f,onClose:t,setIsDownloading:i})]})})})},C=function(n){var e=n.detailLookupStockData,t=n.type,s=(0,a.useState)(""),c=(0,r.Z)(s,2),u=c[0],h=c[1],p=(0,d.Nr)(u,300),f=(0,r.Z)(p,1)[0],Z=(0,a.useState)([]),g=(0,r.Z)(Z,2),m=g[0],w=g[1],C=(0,a.useState)(0),I=(0,r.Z)(C,2),D=I[0],H=I[1],P=(0,a.useState)(1),L=(0,r.Z)(P,2),M=L[0],R=L[1],B=(0,a.useState)(!1),F=(0,r.Z)(B,2),q=F[0],z=F[1],N=function(){};switch(t){case"stock":N=k.P;break;case"product":N=k.Q}var A=function(){var n=(0,l.Z)((0,o.Z)().mark((function n(){var t,i,l,r,a;return(0,o.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i={filterProductId:null===e||void 0===e?void 0:e.productId,page:M,search:u},n.next=3,N(i);case 3:l=n.sent,r=l.data,a=l.meta,w(r||[]),H(null===a||void 0===a||null===(t=a.info)||void 0===t?void 0:t.totalPage);case 8:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),_=function(){var n=(0,l.Z)((0,o.Z)().mark((function n(t){var l,r,a,d,s;return(0,o.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return l={filterProductId:(null===e||void 0===e?void 0:e.productId)||(null===e||void 0===e?void 0:e.id),page:t,search:u,pageSize:5},n.next=3,(0,k.P)(l);case 3:r=n.sent,a=r.data,d=r.meta,a&&(w((function(n){return[].concat((0,i.Z)(n),(0,i.Z)(a))})),H(null===d||void 0===d||null===(s=d.info)||void 0===s?void 0:s.totalPage));case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();(0,a.useEffect)((function(){A()}),[f]);var K=function(){return(null===m||void 0===m?void 0:m.length)>0?null===m||void 0===m?void 0:m.map((function(n){return(0,b.jsx)(T,{title:null===n||void 0===n?void 0:n.code,subTitle:"Sisa: ".concat(null===n||void 0===n?void 0:n.name),sx:{marginBottom:"12px"},withDelete:!1},null===n||void 0===n?void 0:n.id)})):u?"Data tidak ditemukan":"Tidak ada data"};return(0,b.jsx)(j.Z.Content,{children:(0,b.jsxs)(v.Z,{spacing:3,sx:{p:3},children:[(0,b.jsx)(T,{title:function(){var n,i,o,l,r;return"stock"===t?"".concat(null===e||void 0===e||null===(n=e.brand)||void 0===n?void 0:n.brand," - ").concat(null===e||void 0===e||null===(i=e.variant)||void 0===i?void 0:i.variant," ").concat(null===e||void 0===e||null===(o=e.type)||void 0===o?void 0:o.value," ").concat(null===e||void 0===e||null===(l=e.type)||void 0===l||null===(r=l.unit)||void 0===r?void 0:r.unit):"".concat(null===e||void 0===e?void 0:e.brand," - ").concat(null===e||void 0===e?void 0:e.variant," ").concat(null===e||void 0===e?void 0:e.type)}(),withDelete:!1}),(0,b.jsx)(x.Z,{label:"Cari Produk",value:u,onChange:function(n){h(n.target.value),R(1)}}),(0,b.jsx)(S.Z,{sx:{height:{sm:"300px"}},onScroll:function(n){var e=n.currentTarget;M<D&&!q&&(0,y.U2)(e,30,(0,l.Z)((0,o.Z)().mark((function n(){return(0,o.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return z(!0),n.next=3,_(M+1);case 3:R(M+1),z(!1);case 5:case"end":return n.stop()}}),n)}))))},children:(0,b.jsx)(K,{})})]})})},T=function(n){var e=n.title,t=n.subTitle,i=n.withDelete,o=void 0===i||i,l=n.sx,r=void 0===l?{}:l,a=(0,f.Z)();return(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)(v.Z,{direction:"row",alignItems:"center",sx:r,children:[(0,b.jsx)(c.Z,{sx:{width:"40px",height:"40px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"16px",color:a.palette.warning.dark,backgroundColor:(0,Z.Fq)(a.palette.warning.main,.16)},children:(0,b.jsx)(g.Z,{icon:"mdi:cart",sx:{width:"20px",height:"20px"}})}),(0,b.jsxs)(v.Z,{width:"100%",direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,b.jsxs)(c.Z,{children:[(0,b.jsx)(h.Z,{variant:"body1",children:e}),(0,b.jsx)(h.Z,{variant:"body2",sx:{color:"text.secondary"},children:t})]}),o&&(0,b.jsx)(p.Z,{size:"small",color:"error",children:(0,b.jsx)(g.Z,{icon:"eva:trash-2-outline"})})]})]})})};e.Z=function(n){var e=n.open,t=n.onClose,i=n.detailLookupStockData,o=n.type,l=void 0===o?"stock":o,d=(0,a.useState)(!1),c=(0,r.Z)(d,2),u=c[0],v=c[1],x=(0,s.N)();return(0,b.jsxs)(j.Z,{open:e,onClose:function(){return u?void x({title:"Perhatian!",description:"Mohon tunggu hingga proses pengambilan data selesai"}):t()},children:[(0,b.jsx)(w,{detailLookupStockData:i,onClose:t,setIsDownloading:v}),(0,b.jsx)(C,{detailLookupStockData:i,type:l})]})}},73024:function(n,e,t){"use strict";t.d(e,{Z:function(){return l}});var i=t(70885),o=t(72791);function l(n){var e=(0,o.useState)(n||""),t=(0,i.Z)(e,2),l=t[0],r=t[1];return{currentTab:l,onChangeTab:function(n,e){r(e)},setCurrentTab:r}}},44685:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return Tn}});var i=t(70885),o=t(72791),l=t(91614),r=t(36151),a=t(53767),d=t(85703),s=t(25212),c=t(53026),u=t(17827),v=t(74165),x=t(1413),h=t(15861),p=t(4942),f=t(57621),Z=t(51603),j=t(63466),g=t(39281),S=t(79836),m=t(53382),k=t(35855),y=t(53994),b=t(20068),w=t(13400),C=t(64554),T=t(63033),I=t(56890),D=t(80720),H=t(9281),P=t(24775),L=t(74384),M=t(80184),R=function(n){var e=n.open,t=n.onClose,i=n.detailStockData;return(0,M.jsx)(L.Z,{title:"Detail Stok",open:e,onClose:t,children:(0,M.jsx)(B,{detailStockData:i})})},B=function(n){var e,t,i,o,l,r,d=n.detailStockData;return(0,M.jsx)(a.Z,{children:(0,M.jsxs)(a.Z,{spacing:3,sx:{p:3},children:[(0,M.jsx)(Z.Z,{id:"code",value:null===d||void 0===d||null===(e=d.product)||void 0===e?void 0:e.code,label:"Kode",variant:"outlined",disabled:!0}),(0,M.jsx)(Z.Z,{value:null===d||void 0===d||null===(t=d.brand)||void 0===t?void 0:t.brand,type:"text",id:"brand",label:"Brand",variant:"outlined",disabled:!0}),(0,M.jsx)(Z.Z,{value:null===d||void 0===d||null===(i=d.variant)||void 0===i?void 0:i.variant,type:"text",id:"variant",label:"Varian",variant:"outlined",disabled:!0}),(0,M.jsx)(Z.Z,{value:"".concat(null===d||void 0===d||null===(o=d.type)||void 0===o?void 0:o.value," ").concat(null===d||void 0===d||null===(l=d.type)||void 0===l||null===(r=l.unit)||void 0===r?void 0:r.unit),type:"text",id:"type",label:"Tipe",variant:"outlined",disabled:!0}),(0,M.jsx)(Z.Z,{value:null===d||void 0===d?void 0:d.totalSeal,type:"text",id:"totalseal",label:"Total Segel",variant:"outlined",disabled:!0}),(0,M.jsx)(Z.Z,{value:null===d||void 0===d?void 0:d.totalNotSeal,type:"text",id:"totalnotseal",label:"Total Tidak Segel",variant:"outlined",disabled:!0}),(0,M.jsx)(Z.Z,{value:(null===d||void 0===d?void 0:d.totalSeal)+(null===d||void 0===d?void 0:d.totalNotSeal),type:"text",id:"totalstock",label:"Total Stock",variant:"outlined",disabled:!0})]})})},F=t(27578),q=t(42982),z=t(21765),N=t(94721),A=t(97123),_=t(20890),K=t(39709),W=t(13967),E=t(12065),Q=t(75985),G=t(5592);var V=function(n){var e,t,l=n.onClose,d=n.getStocksHandler,s=n.editConversionStockData,c=n.showModalSuccessCreateTrxHandler,u=n.setRefetchStockHistory,p=n.refetchStockHistory,f=(0,z.N)(),Z=(0,o.useState)([]),j=(0,i.Z)(Z,2),g=j[0],S=j[1],m=(0,o.useState)(""),k=(0,i.Z)(m,2),y=k[0],b=k[1],w=(0,o.useState)([]),C=(0,i.Z)(w,2),T=C[0],I=C[1],D=(0,o.useState)(""),H=(0,i.Z)(D,2),L=H[0],R=H[1],B=(0,o.useState)([]),F=(0,i.Z)(B,2),_=F[0],W=F[1],E=(0,o.useState)(""),V=(0,i.Z)(E,2),J=V[0],Y=V[1],U=(0,o.useState)(""),$=(0,i.Z)(U,2),X=$[0],nn=$[1],en=""===X||0===parseFloat(X)||null===X||void 0===X,tn=0===(null===g||void 0===g?void 0:g.length)||0===(null===T||void 0===T?void 0:T.length)||en,on=function(n){nn(n.target.value)},ln=function(){var n=(0,h.Z)((0,v.Z)().mark((function n(e){var t,i,o,r,a;return(0,v.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.preventDefault(),o={trxType:"convert",productOriginId:null===g||void 0===g||null===(t=g[0])||void 0===t?void 0:t.id,productLookupOriginIds:null===T||void 0===T?void 0:T.map((function(n){return null===n||void 0===n?void 0:n.id})),productDestinationId:null===_||void 0===_||null===(i=_[0])||void 0===i?void 0:i.id,quantity:parseFloat(X),orderTrxId:null},n.next=4,(0,P.ZA)(o);case 4:if(r=n.sent,a=r.data,!r.isSuccess){n.next=14;break}return l(),Q.Am.success("Berhasil mengkonversi stok"),n.next=12,d();case 12:u(!p),setTimeout((function(){c(a,"conversion")}),250);case 14:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return(0,o.useEffect)((function(){var n,e,t,i,o,l,r;s&&S([{id:null===s||void 0===s||null===(n=s.product)||void 0===n?void 0:n.id,title:"".concat(null===s||void 0===s||null===(e=s.brand)||void 0===e?void 0:e.brand," - ").concat(null===s||void 0===s||null===(t=s.variant)||void 0===t?void 0:t.variant," ").concat(null===s||void 0===s||null===(i=s.type)||void 0===i?void 0:i.value," ").concat(null===s||void 0===s||null===(o=s.type)||void 0===o||null===(l=o.unit)||void 0===l?void 0:l.unit),subTitle:null===s||void 0===s||null===(r=s.product)||void 0===r?void 0:r.code}])}),[s]),(0,M.jsxs)(a.Z,{component:"form",onSubmit:function(n){n.preventDefault(),f().then((function(){ln(n)}))},children:[(0,M.jsxs)(a.Z,{spacing:3,sx:{p:3},children:[(0,M.jsx)(G.Z,{label:"Cari Produk (*)",type:"products",onChange:function(n){if(b(null===n||void 0===n?void 0:n.label),n){var e,t,i,o,l,r={id:null===n||void 0===n?void 0:n.id,title:"".concat(null===n||void 0===n||null===(e=n.brand)||void 0===e?void 0:e.brand," - ").concat(null===n||void 0===n||null===(t=n.variant)||void 0===t?void 0:t.variant," ").concat(null===n||void 0===n||null===(i=n.type)||void 0===i?void 0:i.value," ").concat(null===n||void 0===n||null===(o=n.type)||void 0===o||null===(l=o.unit)||void 0===l?void 0:l.unit),subTitle:null===n||void 0===n?void 0:n.code};S([r])}},labelText:y,excludeIds:null===g||void 0===g?void 0:g.map((function(n){return null===n||void 0===n?void 0:n.id}))}),null===g||void 0===g?void 0:g.map((function(n,e){return(0,M.jsx)(O,(0,x.Z)({index:e,selectedData:g,setSelectedData:S,withDelete:!1},n),null===n||void 0===n?void 0:n.id)})),(0,M.jsx)(N.Z,{sx:{borderStyle:"dotted",borderSpacing:"2"}}),(0,M.jsx)(G.Z,{label:"Cari Lookup (*)",disabled:0===(null===g||void 0===g?void 0:g.length),type:"lookupStocks",additionalQuery:{filterProductId:null===g||void 0===g||null===(e=g[0])||void 0===e?void 0:e.id},onChange:function(n){if(R(null===n||void 0===n?void 0:n.label),n&&!function(n){var e;return(null===T||void 0===T||null===(e=T.filter((function(e){return(null===e||void 0===e?void 0:e.id)===n})))||void 0===e?void 0:e.length)>0}(null===n||void 0===n?void 0:n.id)){var e={id:null===n||void 0===n?void 0:n.id,title:null===n||void 0===n?void 0:n.code,subTitle:"Sisa: ".concat(null===n||void 0===n?void 0:n.name," ")};I((function(n){return[].concat((0,q.Z)(n),[e])}))}},labelText:L,excludeIds:null===T||void 0===T?void 0:T.map((function(n){return null===n||void 0===n?void 0:n.id}))}),null===T||void 0===T?void 0:T.map((function(n,e){return(0,M.jsx)(O,(0,x.Z)({index:e,selectedData:T,setSelectedData:I},n),null===n||void 0===n?void 0:n.id)})),(0,M.jsx)(G.Z,{disabled:0===(null===g||void 0===g?void 0:g.length),label:"Cari Tipe (*)",type:"productTypes",additionalQuery:{productId:null===g||void 0===g||null===(t=g[0])||void 0===t?void 0:t.id},onChange:function(n){if(Y(null===n||void 0===n?void 0:n.label),n){var e={id:null===n||void 0===n?void 0:n.id,title:null===n||void 0===n?void 0:n.name,subTitle:null===n||void 0===n?void 0:n.code};W([e])}},excludeIds:(null===_||void 0===_?void 0:_.map((function(n){return null===n||void 0===n?void 0:n.id})))||[],labelText:J}),null===_||void 0===_?void 0:_.map((function(n,e){return(0,M.jsx)(O,(0,x.Z)({index:e,selectedData:_,setSelectedData:W,iconType:"warning",onChangeQuantityHandler:on,quantity:X,withDelete:!1},n),null===n||void 0===n?void 0:n.id)}))]}),(0,M.jsxs)(A.Z,{children:[(0,M.jsx)(r.Z,{variant:"outlined",color:"inherit",onClick:l,children:"Close"}),(0,M.jsx)(K.Z,{type:"submit",variant:"contained",disabled:tn,children:"Save"})]})]})},O=function(n){var e=n.index,t=n.subTitle,i=n.title,o=n.selectedData,l=n.setSelectedData,r=n.withDelete,d=void 0===r||r,s=n.iconType,u=void 0===s?"success":s,v=n.onChangeQuantityHandler,x=n.quantity,h=(0,W.Z)();return(0,M.jsxs)(a.Z,{direction:"row",alignItems:"center",children:[(0,M.jsx)(C.Z,{sx:{width:"40px",height:"40px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"16px",color:"success"===u?h.palette.success.dark:h.palette.warning.dark,backgroundColor:(0,E.Fq)("success"===u?h.palette.success.main:h.palette.warning.main,.16)},children:(0,M.jsx)(c.Z,{icon:"success"===u?"mdi:office-building-settings":"mdi:cart",sx:{width:"20px",height:"20px"}})}),(0,M.jsxs)(a.Z,{width:"100%",direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,M.jsxs)(C.Z,{children:[(0,M.jsx)(_.Z,{variant:"body1",children:i}),(0,M.jsx)(_.Z,{variant:"body2",sx:{color:"text.secondary"},children:t})]}),"warning"===u&&(0,M.jsx)(Z.Z,{id:"outlined-basic",label:"Jumlah (*)",variant:"outlined",size:"small",value:x,onChange:v,type:"number"}),d&&(0,M.jsx)(w.Z,{size:"small",color:"error",onClick:function(){var n=(0,q.Z)(o);n.splice(e,1),l(n)},children:(0,M.jsx)(c.Z,{icon:"eva:trash-2-outline"})})]})]})},J=function(n){var e=n.open,t=n.onClose,i=n.getStocksHandler,o=n.editConversionStockData,l=n.showModalSuccessCreateTrxHandler,r=n.refetchStockHistory,a=n.setRefetchStockHistory;return(0,M.jsx)(L.Z,{title:"Konversi Stok",open:e,onClose:t,maxWidth:"sm",children:(0,M.jsx)(V,{onClose:t,editConversionStockData:o,showModalSuccessCreateTrxHandler:l,getStocksHandler:i,refetchStockHistory:r,setRefetchStockHistory:a})})},Y=t(40329),U=t.n(Y),$=t(39124),X=t(43896),nn=t(73024),en=t(55492);function tn(n){var e,t=n.onClose,l=n.getStocksHandler,d=n.showModalSuccessCreateTrxHandler,s=n.refetchStockHistory,c=n.setRefetchStockHistory,u=(0,z.N)(),p=(0,nn.Z)("in"),f=p.currentTab,Z=p.onChangeTab,j=(0,o.useState)(""),g=(0,i.Z)(j,2),S=g[0],m=g[1],k=(0,o.useState)(""),y=(0,i.Z)(k,2),b=y[0],w=y[1],C=(0,o.useState)(""),T=(0,i.Z)(C,2),I=T[0],D=T[1],H=(0,o.useState)([]),L=(0,i.Z)(H,2),R=L[0],B=L[1],F=(0,o.useState)(""),N=(0,i.Z)(F,2),_=N[0],W=N[1],E=function(n){var e;return(null===R||void 0===R||null===(e=R.filter((function(e){return(null===e||void 0===e?void 0:e.id)===n})))||void 0===e?void 0:e.length)>0},V=function(){var n=(0,h.Z)((0,v.Z)().mark((function n(e){var t,i;return(0,v.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,en.j$)(b,e);case 2:if(t=n.sent,!(i=t.data)){n.next=6;break}return n.abrupt("return",null===i||void 0===i?void 0:i.count);case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),O=function(){var n=(0,h.Z)((0,v.Z)().mark((function n(e){var t,i,o,l,r,a,d,s;return(0,v.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e||E(null===e||void 0===e?void 0:e.id)){n.next=10;break}if(a=0,"in"!==f){n.next=7;break}return n.next=5,V(null===e||void 0===e?void 0:e.code);case 5:d=n.sent,a=d;case 7:s={id:null===e||void 0===e?void 0:e.id,productName:"".concat(null===e||void 0===e||null===(t=e.brand)||void 0===t?void 0:t.brand," - ").concat(null===e||void 0===e||null===(i=e.variant)||void 0===i?void 0:i.variant," ").concat(null===e||void 0===e||null===(o=e.type)||void 0===o?void 0:o.value," ").concat(null===e||void 0===e||null===(l=e.type)||void 0===l||null===(r=l.unit)||void 0===r?void 0:r.unit),productCode:null===e||void 0===e?void 0:e.code,quantity:"",estimateQuantity:a},W(null===e||void 0===e?void 0:e.label),B((function(n){return[].concat((0,q.Z)(n),[s])}));case 10:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),J=function(){var n=(0,h.Z)((0,v.Z)().mark((function n(){var e,i,o;return(0,v.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e={trxType:f,orderTrxId:S,products:null===R||void 0===R?void 0:R.map((function(n){return{id:null===n||void 0===n?void 0:n.id,quantity:U()(null===n||void 0===n?void 0:n.quantity),estimateQuantity:U()(null===n||void 0===n?void 0:n.estimateQuantity)}}))},n.next=3,(0,P.V9)(e);case 3:if(i=n.sent,o=i.data,!i.isSuccess){n.next=13;break}return t(),Q.Am.success("Berhasil membuat transaksi"),n.next=11,l();case 11:c(!s),setTimeout((function(){d(o,"transaction")}),250);case 13:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,o.useEffect)((function(){m(""),w(""),B([]),D(""),W("")}),[f]),(0,M.jsxs)(a.Z,{component:"form",onSubmit:function(n){n.preventDefault(),u().then((function(){J(n)}))},children:[(0,M.jsxs)(a.Z,{spacing:3,sx:{p:3},children:[(0,M.jsx)($.Z,{allowScrollButtonsMobile:!0,variant:"scrollable",scrollButtons:"auto",value:f,onChange:Z,sx:{px:2,bgcolor:"background.neutral"},children:[{value:"in",label:"Masuk"},{value:"out",label:"Keluar"}].map((function(n){return(0,M.jsx)(X.Z,{disableRipple:!0,value:n.value,label:(0,M.jsx)(a.Z,{spacing:1,direction:"row",alignItems:"center",children:(0,M.jsx)("div",{children:n.label})})},n.value)}))}),(0,M.jsx)(G.Z,{value:S,label:"Cari Pesanan",type:"orders",onChange:function(n){m(null===n||void 0===n?void 0:n.id),w(null===n||void 0===n?void 0:n.code),D(null===n||void 0===n?void 0:n.label)},disabled:"out"===f,labelText:I}),(0,M.jsx)(G.Z,{value:null===R||void 0===R||null===(e=R[0])||void 0===e?void 0:e.id,label:"Cari Produk",type:"products",onChange:O,required:!0,excludeIds:null===R||void 0===R?void 0:R.map((function(n){return n.id})),labelText:_}),null===R||void 0===R?void 0:R.map((function(n,e){return(0,M.jsx)(on,(0,x.Z)({index:e,selectedProducts:R,setSelectedProducts:B,currentTab:f},n),null===n||void 0===n?void 0:n.id)}))]}),(0,M.jsxs)(A.Z,{children:[(0,M.jsx)(r.Z,{variant:"outlined",color:"inherit",onClick:t,children:"Close"}),(0,M.jsx)(K.Z,{type:"submit",variant:"contained",loading:!1,disabled:function(){var n;return 0===(null===R||void 0===R?void 0:R.length)||(null===R||void 0===R||null===(n=R.filter((function(n){return""===(null===n||void 0===n?void 0:n.quantity)||0===parseFloat(null===n||void 0===n?void 0:n.quantity)||null===(null===n||void 0===n?void 0:n.quantity)||void 0===(null===n||void 0===n?void 0:n.quantity)})))||void 0===n?void 0:n.length)>0}(),children:"Save"})]})]})}var on=function(n){var e=n.index,t=n.productCode,l=n.productName,r=n.quantity,d=n.estimateQuantity,s=n.selectedProducts,u=n.setSelectedProducts,v=n.currentTab,x=(0,W.Z)(),h=(0,o.useState)(r),p=(0,i.Z)(h,2),f=p[0],j=p[1],g=(0,o.useState)(d),S=(0,i.Z)(g,2),m=S[0],k=S[1];return(0,M.jsxs)(a.Z,{direction:"row",alignItems:"center",children:[(0,M.jsx)(C.Z,{sx:{width:"40px",height:"40px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"16px",color:x.palette.success.dark,backgroundColor:(0,E.Fq)(x.palette.success.main,.16)},children:(0,M.jsx)(c.Z,{icon:"mdi:office-building-settings",sx:{width:"20px",height:"20px"}})}),(0,M.jsxs)(a.Z,{width:"100%",direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,M.jsxs)(C.Z,{children:[(0,M.jsx)(_.Z,{variant:"body1",children:l}),(0,M.jsx)(_.Z,{variant:"body2",sx:{color:"text.secondary"},children:t})]}),(0,M.jsxs)(a.Z,{width:"50%",flexDirection:"row",alignItems:"center",children:[(0,M.jsxs)(C.Z,{children:[(0,M.jsx)(Z.Z,{id:"outlined-basic",label:"Jumlah Aktual",variant:"outlined",size:"small",sx:{marginBottom:"8px"},value:f,onChange:function(n){var t=n.target.value;j(t);var i=(0,q.Z)(s);i[e].quantity=t,u(i)},required:!0}),"in"===v&&(0,M.jsx)(Z.Z,{id:"outlined-basic",label:"Jumlah Estimasi",variant:"outlined",size:"small",value:m,onChange:function(n){var t=n.target.value;k(t);var i=(0,q.Z)(s);i[e].estimateQuantity=t,u(i)}})]}),(0,M.jsx)(w.Z,{size:"small",color:"error",onClick:function(){var n=(0,q.Z)(s);n.splice(e,1),u(n)},children:(0,M.jsx)(c.Z,{icon:"eva:trash-2-outline"})})]})]})]})},ln=function(n){var e=n.open,t=n.onClose,i=n.getStocksHandler,o=n.showModalSuccessCreateTrxHandler,l=n.refetchStockHistory,r=n.setRefetchStockHistory;return(0,M.jsx)(L.Z,{title:"Transaksi Stok",open:e,onClose:t,maxWidth:"sm",children:(0,M.jsx)(tn,{onClose:t,getStocksHandler:i,showModalSuccessCreateTrxHandler:o,refetchStockHistory:l,setRefetchStockHistory:r})})},rn=t(59510),an=t(65661),dn=t(94070),sn=t(76662),cn=t(29620),un=function(n){var e=n.createdTrxData,t=n.setIsDownloading,l=n.onClose,r=(0,o.useState)([]),a=(0,i.Z)(r,2),d=a[0],s=a[1],c=(0,o.useState)(!1),u=(0,i.Z)(c,2),x=u[0],p=u[1],f=(e||{}).products,Z=function(){var n=(0,h.Z)((0,v.Z)().mark((function n(){var e;return(0,v.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t(!0),p(!0),e=null===f||void 0===f?void 0:f.map((function(n){var e;return null===n||void 0===n||null===(e=n.lookups)||void 0===e?void 0:e.map((function(n){return null===n||void 0===n?void 0:n.code}))})),s(e[0]),p(!1);case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,M.jsx)(sn.Z.Header,{children:(0,M.jsx)(C.Z,{sx:{flexGrow:1,display:"flex",alignItems:"center"},children:(0,M.jsxs)(an.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},children:[(0,M.jsx)(C.Z,{children:"Kode Produk"}),(0,M.jsx)(cn.Z,{onClick:Z,valueStrings:d,isLoading:x,onClose:l,setIsDownloading:t})]})})})},vn=function(n){var e=n.createdTrxData,t=n.type,i=(0,W.Z)(),l=(e||{}).products;return(0,M.jsx)(sn.Z.Content,{children:(0,M.jsx)(a.Z,{children:(0,M.jsx)(a.Z,{spacing:3,sx:{p:3},children:null===l||void 0===l?void 0:l.map((function(n,e){var l,r,a;return(0,M.jsxs)(o.Fragment,{children:["transaction"===t&&(0,M.jsx)(_.Z,{variant:"body1",sx:{marginRight:"8px",borderLeft:"5px solid ".concat(i.palette.success.main),borderRadius:"4px",paddingLeft:"16px"},children:"".concat(e+1,". ").concat((null===n||void 0===n||null===(l=n.product)||void 0===l?void 0:l.name)||(null===n||void 0===n||null===(r=n.item)||void 0===r?void 0:r.stockTrxId))}),null===n||void 0===n||null===(a=n.lookups)||void 0===a?void 0:a.map((function(n,e){return(0,M.jsx)(dn.Z,{children:"".concat(e+1,". ").concat(null===n||void 0===n?void 0:n.code)},e)}))]},e)}))})})})},xn=function(n){var e=n.open,t=n.onClose,l=n.createdTrxData,r=n.type,a=void 0===r?"transaction":r,d=(0,o.useState)(!1),s=(0,i.Z)(d,2),c=s[0],u=s[1],v=(0,z.N)();return(0,M.jsxs)(sn.Z,{open:e,onClose:function(){return c?void v({title:"Perhatian!",description:"Mohon tunggu hingga proses pengambilan data selesai"}):t()},children:[(0,M.jsx)(un,{createdTrxData:l,setIsDownloading:u,onClose:t}),(0,M.jsx)(vn,{createdTrxData:l,type:a})]})},hn=t(52094),pn=t(41758),fn=function(n){var e=n.orderBy,t=n.order,i=n.onSortHandler;return(0,M.jsx)(I.Z,{children:(0,M.jsx)(k.Z,{children:[{id:"no",label:"No",withSort:!1},{id:"code",label:"Kode",withSort:!0},{id:"brand",label:"Brand",withSort:!0},{id:"variant",label:"Varian",withSort:!0},{id:"type",label:"Tipe",withSort:!0},{id:"total_seal",label:"Segel",withSort:!0},{id:"total_not_seal",label:"Tidak Segel",withSort:!0},{id:"total",label:"Total",withSort:!1},{id:"action",label:"Aksi",withSort:!1}].map((function(n){return(0,M.jsx)(y.Z,{children:(0,M.jsx)(hn.Z,{condition:n.withSort,wrapper:function(o){return(0,M.jsx)(D.Z,{active:e===n.id,direction:e===n.id?t:"asc",onClick:function(){return e=n.id,void i(e);var e},children:o})},children:n.label})},n.id)}))})})},Zn=function(n){var e=n.showConversionStockModal,t=n.closeConversionStockModalHandler,l=n.showTransactionStockModal,r=n.closeTransactionStockModalHandler,d=n.showConversionStockModalHandler,s=n.setTotalStock,u=n.refetchStockHistory,I=n.setRefetchStockHistory,D=(0,o.useState)(""),L=(0,i.Z)(D,2),B=L[0],q=L[1],z=(0,o.useState)(""),N=(0,i.Z)(z,2),A=N[0],_=N[1],K=(0,o.useState)("created_at"),W=(0,i.Z)(K,2),E=W[0],Q=W[1],V=(0,o.useState)("desc"),O=(0,i.Z)(V,2),Y=O[0],U=O[1],$=(0,o.useState)(""),X=(0,i.Z)($,2),nn=X[0],en=X[1],tn=(0,H.Nr)(nn,300),on=(0,i.Z)(tn,1)[0],an=(0,o.useState)([]),dn=(0,i.Z)(an,2),sn=dn[0],cn=dn[1],un=(0,o.useState)(null),vn=(0,i.Z)(un,2),hn=vn[0],Zn=vn[1],jn=(0,o.useState)(0),gn=(0,i.Z)(jn,2),Sn=gn[0],mn=gn[1],kn=(0,o.useState)(5),yn=(0,i.Z)(kn,2),bn=yn[0],wn=yn[1],Cn=(0,o.useState)(!1),Tn=(0,i.Z)(Cn,2),In=Tn[0],Dn=Tn[1],Hn=(0,o.useState)(null),Pn=(0,i.Z)(Hn,2),Ln=Pn[0],Mn=Pn[1],Rn=(0,o.useState)(!1),Bn=(0,i.Z)(Rn,2),Fn=Bn[0],qn=Bn[1],zn=(0,o.useState)(null),Nn=(0,i.Z)(zn,2),An=Nn[0],_n=Nn[1],Kn=(0,o.useState)(!1),Wn=(0,i.Z)(Kn,2),En=Wn[0],Qn=Wn[1],Gn=(0,o.useState)(null),Vn=(0,i.Z)(Gn,2),On=Vn[0],Jn=Vn[1],Yn=(0,o.useState)(null),Un=(0,i.Z)(Yn,2),$n=Un[0],Xn=Un[1],ne=(0,o.useState)(null),ee=(0,i.Z)(ne,2),te=ee[0],ie=ee[1],oe=function(n,e){Qn(!0),Xn(n),Jn(e)},le=function(){var n=(0,h.Z)((0,v.Z)().mark((function n(){var e,t,i,o,l;return(0,v.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=(0,x.Z)((0,x.Z)({page:Sn+1,pageSize:bn,search:nn},Y&&(0,p.Z)({},"asc"===Y?"ascField":"dscField",E)),B&&{filterBrandId:B}),n.next=3,(0,P.Sn)(t);case 3:i=n.sent,o=i.data,l=i.meta,cn(o||[]),Zn(null===l||void 0===l?void 0:l.info),s(null===l||void 0===l||null===(e=l.info)||void 0===e?void 0:e.count);case 9:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,o.useEffect)((function(){le()}),[bn,Sn,on,Y,B]),(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)(f.Z,{children:[(0,M.jsxs)(a.Z,{direction:"row",alignItems:"center",sx:{py:2.5,px:3},children:[(0,M.jsx)(G.Z,{value:B,label:"Cari Brand",type:"brands",onChange:function(n){_(null===n||void 0===n?void 0:n.label),q(null===n||void 0===n?void 0:n.id),mn(0)},sx:{width:300,marginRight:"20px"},labelText:A}),(0,M.jsx)(Z.Z,{value:nn,onChange:function(n){en(n.target.value),mn(0)},placeholder:"Cari stock...",sx:{width:"100%"},InputProps:{startAdornment:(0,M.jsx)(j.Z,{position:"start",children:(0,M.jsx)(c.Z,{icon:"eva:search-fill",sx:{color:"text.disabled",width:20,height:20}})})}})]}),(0,M.jsx)(F.Z,{children:(0,M.jsx)(g.Z,{sx:{minWidth:720},children:(0,M.jsxs)(S.Z,{children:[(0,M.jsx)(fn,{orderBy:E,order:Y,onSortHandler:function(n){U(E===n&&"asc"===Y?"desc":"asc"),Q(n)}}),(0,M.jsx)(m.Z,{children:sn.map((function(n,e){var t,i,o,l,r,a;return(0,M.jsxs)(k.Z,{children:[(0,M.jsx)(y.Z,{children:e+1+Sn*bn}),(0,M.jsx)(y.Z,{children:null===n||void 0===n||null===(t=n.product)||void 0===t?void 0:t.code}),(0,M.jsx)(y.Z,{children:null===n||void 0===n||null===(i=n.brand)||void 0===i?void 0:i.brand}),(0,M.jsx)(y.Z,{children:null===n||void 0===n||null===(o=n.variant)||void 0===o?void 0:o.variant}),(0,M.jsx)(y.Z,{children:"".concat(null===n||void 0===n||null===(l=n.type)||void 0===l?void 0:l.value," ").concat(null===n||void 0===n||null===(r=n.type)||void 0===r||null===(a=r.unit)||void 0===a?void 0:a.unit)}),(0,M.jsx)(y.Z,{children:(0,M.jsx)(pn.Z,{variant:"ghost",color:"info",children:null===n||void 0===n?void 0:n.totalSeal})}),(0,M.jsx)(y.Z,{children:(0,M.jsx)(pn.Z,{variant:"ghost",color:"error",children:null===n||void 0===n?void 0:n.totalNotSeal})}),(0,M.jsx)(y.Z,{children:(0,M.jsx)(pn.Z,{variant:"ghost",color:"success",children:(null===n||void 0===n?void 0:n.totalSeal)+(null===n||void 0===n?void 0:n.totalNotSeal)})}),(0,M.jsxs)(y.Z,{children:[(0,M.jsx)(b.Z,{title:"Detail Stok",children:(0,M.jsx)(w.Z,{size:"small",color:"warning",onClick:function(){return e=n,Dn(!0),void Mn(e);var e},children:(0,M.jsx)(c.Z,{icon:"eva:edit-fill"})})}),(0,M.jsx)(b.Z,{title:"Konversi Stok",children:(0,M.jsx)(w.Z,{size:"small",color:"info",onClick:function(){return ie(n),void d()},children:(0,M.jsx)(c.Z,{icon:"eva:arrow-forward-outline"})})}),(0,M.jsx)(b.Z,{title:"Lookup Stok",children:(0,M.jsx)(w.Z,{size:"small",color:"success",onClick:function(){return e=n,qn(!0),void _n(e);var e},children:(0,M.jsx)(c.Z,{icon:"eva:search-outline"})})})]})]},n.id)}))})]})})}),(0,M.jsx)(C.Z,{sx:{position:"relative"},children:(0,M.jsx)(T.Z,{rowsPerPageOptions:[5,10,25],component:"div",count:(null===hn||void 0===hn?void 0:hn.count)||0,rowsPerPage:bn,page:Sn,onPageChange:function(n,e){mn(e)},onRowsPerPageChange:function(n){wn(n.target.value)}})})]}),(0,M.jsx)(J,{open:e,onClose:function(){ie(null),t()},editConversionStockData:te,showModalSuccessCreateTrxHandler:oe,getStocksHandler:le,setRefetchStockHistory:I,refetchStockHistory:u}),(0,M.jsx)(ln,{open:l,onClose:r,getStocksHandler:le,showModalSuccessCreateTrxHandler:oe,setRefetchStockHistory:I,refetchStockHistory:u}),(0,M.jsx)(rn.Z,{open:Fn,onClose:function(){qn(!1),_n(null)},detailLookupStockData:An}),(0,M.jsx)(R,{open:In,onClose:function(){Dn(!1),Mn(null)},detailStockData:Ln,getStocksHandler:le}),(0,M.jsx)(xn,{open:En,onClose:function(){Qn(!1),Xn(null),Jn(null)},createdTrxData:$n,type:On})]})},jn=t(72426),gn=t.n(jn),Sn=function(n){var e=n.lookups,t=n.setIsDownloading,l=(0,o.useState)([]),r=(0,i.Z)(l,2),a=r[0],d=r[1],s=(0,o.useState)(!1),c=(0,i.Z)(s,2),u=c[0],x=c[1],p=function(){var n=(0,h.Z)((0,v.Z)().mark((function n(){var i;return(0,v.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t(!0),x(!0),i=null===e||void 0===e?void 0:e.map((function(n){return null===n||void 0===n?void 0:n.code})),d(i),x(!1);case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,M.jsx)(sn.Z.Header,{children:(0,M.jsx)(C.Z,{sx:{flexGrow:1,display:"flex",alignItems:"center"},children:(0,M.jsxs)(an.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},children:[(0,M.jsx)(C.Z,{children:"Lookups"}),(0,M.jsx)(cn.Z,{onClick:p,valueStrings:a,isLoading:u,setIsDownloading:t})]})})})},mn=function(n){var e=n.lookups,t=(0,o.useState)(e),l=(0,i.Z)(t,2),r=l[0],d=l[1];return(0,M.jsx)(sn.Z.Content,{children:(0,M.jsxs)(a.Z,{spacing:3,sx:{p:3},children:[(0,M.jsx)(Z.Z,{onChange:function(n){var t=null===e||void 0===e?void 0:e.filter((function(e){var t,i,o,l,r,a=null===(t=n.target.value)||void 0===t?void 0:t.toLowerCase();return(null===e||void 0===e||null===(i=e.code)||void 0===i||null===(o=i.toLowerCase())||void 0===o?void 0:o.includes(a))||(null===e||void 0===e||null===(l=e.value)||void 0===l||null===(r=l.toLowerCase())||void 0===r?void 0:r.includes(a))}));d(t)},placeholder:"Cari...",InputProps:{startAdornment:(0,M.jsx)(j.Z,{position:"start",children:(0,M.jsx)(c.Z,{icon:"eva:search-fill",sx:{color:"text.disabled",width:20,height:20}})})}}),(0,M.jsx)(F.Z,{sx:{maxHeight:"350px"},children:(0,M.jsxs)(S.Z,{children:[(0,M.jsx)(I.Z,{children:(0,M.jsxs)(k.Z,{children:[(0,M.jsx)(y.Z,{children:"Kode"}),(0,M.jsx)(y.Z,{children:"Value"})]})}),(0,M.jsx)(m.Z,{children:(null===r||void 0===r?void 0:r.length)>0?null===r||void 0===r?void 0:r.map((function(n){return(0,M.jsxs)(k.Z,{children:[(0,M.jsx)(y.Z,{children:null===n||void 0===n?void 0:n.code}),(0,M.jsx)(y.Z,{children:"".concat(null===n||void 0===n?void 0:n.value)})]},null===n||void 0===n?void 0:n.id)})):(0,M.jsx)(k.Z,{children:(0,M.jsx)(y.Z,{colSpan:2,children:"Tidak ada data"})})})]})})]})})},kn=function(n){var e,t=n.open,l=n.onClose,r=n.lookupData,a=(0,o.useState)(!1),d=(0,i.Z)(a,2),s=d[0],c=d[1],u=(0,z.N)(),v=(null===r||void 0===r||null===(e=r.stockTrxItemLookups)||void 0===e?void 0:e.map((function(n){var e,t,i;return{id:null===n||void 0===n?void 0:n.id,code:null===n||void 0===n?void 0:n.code,value:"".concat(null===n||void 0===n?void 0:n.remainingTypeValue," ").concat(null===r||void 0===r||null===(e=r.product)||void 0===e||null===(t=e.type)||void 0===t||null===(i=t.unit)||void 0===i?void 0:i.unit)}})))||[];return(0,M.jsxs)(sn.Z,{open:t,onClose:function(){return s?void u({title:"Perhatian!",description:"Mohon tunggu hingga proses pengambilan data selesai"}):l()},children:[(0,M.jsx)(Sn,{lookups:v,setIsDownloading:c,onClose:l}),(0,M.jsx)(mn,{lookups:v})]})};function yn(n){var e=n.stockData;console.log("stockData",e);var t=(null===e||void 0===e?void 0:e.stockTrxItems)||[],l=(0,o.useState)(!1),r=(0,i.Z)(l,2),d=r[0],s=r[1],u=(0,o.useState)(null),v=(0,i.Z)(u,2),x=v[0],h=v[1];return(0,M.jsxs)(a.Z,{spacing:3,sx:{p:3},children:[(0,M.jsx)(F.Z,{sx:{maxHeight:"350px"},children:(0,M.jsxs)(S.Z,{children:[(0,M.jsx)(I.Z,{children:(0,M.jsxs)(k.Z,{children:[(0,M.jsx)(y.Z,{children:"Nama Produk"}),(0,M.jsx)(y.Z,{children:"Tipe Konversi"}),(0,M.jsx)(y.Z,{children:"Tipe"}),(0,M.jsx)(y.Z,{children:"Aksi"})]})}),(0,M.jsx)(m.Z,{children:null===t||void 0===t?void 0:t.map((function(n){var e,t,i,o,l,r,a,d,u,v,x;return(0,M.jsxs)(k.Z,{children:[(0,M.jsx)(y.Z,{children:"".concat(null===n||void 0===n||null===(e=n.product)||void 0===e?void 0:e.code," - ").concat(null===n||void 0===n||null===(t=n.product)||void 0===t||null===(i=t.variant)||void 0===i||null===(o=i.brand)||void 0===o?void 0:o.brand," - ").concat(null===n||void 0===n||null===(l=n.product)||void 0===l||null===(r=l.variant)||void 0===r?void 0:r.variant)}),(0,M.jsx)(y.Z,{children:(null===n||void 0===n?void 0:n.convertType)&&(0,M.jsx)(pn.Z,{variant:"ghost",color:"origin"===(null===n||void 0===n?void 0:n.convertType)?"success":"warning",children:null===n||void 0===n?void 0:n.convertType})}),(0,M.jsx)(y.Z,{children:"".concat(null===n||void 0===n||null===(a=n.product)||void 0===a||null===(d=a.type)||void 0===d?void 0:d.value," ").concat(null===n||void 0===n||null===(u=n.product)||void 0===u||null===(v=u.type)||void 0===v||null===(x=v.unit)||void 0===x?void 0:x.unit)}),(0,M.jsx)(y.Z,{children:(0,M.jsx)(b.Z,{title:"Lookup items",children:(0,M.jsx)(w.Z,{size:"small",color:"success",onClick:function(){return e=n,s(!0),void h(e);var e},children:(0,M.jsx)(c.Z,{icon:"eva:search-outline"})})})})]},null===n||void 0===n?void 0:n.id)}))})]})}),(0,M.jsx)(kn,{open:d,onClose:function(){s(!1),h(null)},lookupData:x})]})}var bn=function(n){var e=n.open,t=n.onClose,i=n.stockData;return(0,M.jsx)(L.Z,{title:"Items",open:e,onClose:t,maxWidth:"md",children:(0,M.jsx)(yn,{stockData:i})})},wn=function(n){var e=n.orderBy,t=n.order,i=n.onSortHandler;return(0,M.jsx)(I.Z,{children:(0,M.jsx)(k.Z,{children:[{id:"no",label:"No",withSort:!1},{id:"created_at",label:"Tanggal",withSort:!0},{id:"code",label:"Kode",withSort:!0},{id:"trx_type",label:"Jenis Transaksi",withSort:!0},{id:"order_code",label:"Kode Order",withSort:!0},{id:"action",label:"Aksi",withSort:!1}].map((function(n){return(0,M.jsx)(y.Z,{children:(0,M.jsx)(hn.Z,{condition:n.withSort,wrapper:function(o){return(0,M.jsx)(D.Z,{active:e===n.id,direction:e===n.id?t:"asc",onClick:function(){return e=n.id,void i(e);var e},children:o})},children:n.label})},n.id)}))})})},Cn=function(n){var e=n.refetchStockHistory,t=(0,o.useState)("created_at"),l=(0,i.Z)(t,2),r=l[0],d=l[1],s=(0,o.useState)("desc"),I=(0,i.Z)(s,2),D=I[0],L=I[1],R=(0,o.useState)(""),B=(0,i.Z)(R,2),q=B[0],z=B[1],N=(0,H.Nr)(q,300),A=(0,i.Z)(N,1)[0],_=(0,o.useState)([]),K=(0,i.Z)(_,2),W=K[0],E=K[1],Q=(0,o.useState)(null),G=(0,i.Z)(Q,2),V=G[0],O=G[1],J=(0,o.useState)(0),Y=(0,i.Z)(J,2),U=Y[0],$=Y[1],X=(0,o.useState)(5),nn=(0,i.Z)(X,2),en=nn[0],tn=nn[1],on=(0,o.useState)(!1),ln=(0,i.Z)(on,2),rn=ln[0],an=ln[1],dn=(0,o.useState)(null),sn=(0,i.Z)(dn,2),cn=sn[0],un=sn[1],vn=function(){var n=(0,h.Z)((0,v.Z)().mark((function n(){var e,t,i,o;return(0,v.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=(0,x.Z)({page:U+1,pageSize:en,search:q},D&&(0,p.Z)({},"asc"===D?"ascField":"dscField",r)),n.next=3,(0,P.WF)(e);case 3:t=n.sent,i=t.data,o=t.meta,E(i||[]),O(null===o||void 0===o?void 0:o.info);case 8:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,o.useEffect)((function(){vn()}),[en,U,A,D,e]),(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(u.Z,{heading:"Stok History",links:[]}),(0,M.jsxs)(f.Z,{children:[(0,M.jsx)(a.Z,{direction:"row",alignItems:"center",sx:{py:2.5,px:3},children:(0,M.jsx)(Z.Z,{value:q,onChange:function(n){z(n.target.value),$(0)},placeholder:"Search stock...",sx:{width:"100%"},InputProps:{startAdornment:(0,M.jsx)(j.Z,{position:"start",children:(0,M.jsx)(c.Z,{icon:"eva:search-fill",sx:{color:"text.disabled",width:20,height:20}})})}})}),(0,M.jsx)(F.Z,{children:(0,M.jsx)(g.Z,{sx:{minWidth:720},children:(0,M.jsxs)(S.Z,{children:[(0,M.jsx)(wn,{orderBy:r,order:D,onSortHandler:function(n){L(r===n&&"asc"===D?"desc":"asc"),d(n)}}),(0,M.jsx)(m.Z,{children:null===W||void 0===W?void 0:W.map((function(n,e){var t;return(0,M.jsxs)(k.Z,{children:[(0,M.jsx)(y.Z,{children:e+1+U*en}),(0,M.jsx)(y.Z,{children:gn()(null===n||void 0===n?void 0:n.createdAt).format("YYYY-MM-DD HH:mm:ss")}),(0,M.jsx)(y.Z,{children:null===n||void 0===n?void 0:n.code}),(0,M.jsx)(y.Z,{children:(0,M.jsx)(pn.Z,{variant:"ghost",color:"in"===(null===n||void 0===n?void 0:n.trxType)?"success":"error",children:null===n||void 0===n?void 0:n.trxType})}),(0,M.jsx)(y.Z,{children:null===n||void 0===n||null===(t=n.orderTrx)||void 0===t?void 0:t.code}),(0,M.jsx)(y.Z,{children:(0,M.jsx)(b.Z,{title:"Detail History",children:(0,M.jsx)(w.Z,{size:"small",color:"warning",onClick:function(){return e=n,an(!0),void un(e);var e},children:(0,M.jsx)(c.Z,{icon:"eva:edit-fill"})})})})]},n.id)}))})]})})}),(0,M.jsx)(C.Z,{sx:{position:"relative"},children:(0,M.jsx)(T.Z,{rowsPerPageOptions:[5,10,25],component:"div",count:(null===V||void 0===V?void 0:V.count)||0,rowsPerPage:en,page:U,onPageChange:function(n,e){$(e)},onRowsPerPageChange:function(n){tn(n.target.value)}})}),(0,M.jsx)(bn,{open:rn,onClose:function(){an(!1),un(null)},stockData:cn})]})]})};function Tn(){var n=(0,d.Z)().themeStretch,e=(0,o.useState)(!1),t=(0,i.Z)(e,2),v=t[0],x=t[1],h=(0,o.useState)(!1),p=(0,i.Z)(h,2),f=p[0],Z=p[1],j=(0,o.useState)(0),g=(0,i.Z)(j,2),S=g[0],m=g[1],k=(0,o.useState)(!1),y=(0,i.Z)(k,2),b=y[0],w=y[1],C=function(){x(!0)};return(0,M.jsx)(s.Z,{title:"Stok",children:(0,M.jsxs)(l.Z,{maxWidth:!n&&"lg",children:[(0,M.jsx)(u.Z,{heading:"Stok",useBadge:!0,action:(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(r.Z,{variant:"contained",startIcon:(0,M.jsx)(c.Z,{icon:"eva:plus-fill"}),onClick:function(){Z(!0)},sx:{marginRight:"20px"},children:"Transaksi"}),(0,M.jsx)(r.Z,{color:"warning",variant:"contained",startIcon:(0,M.jsx)(c.Z,{icon:"eva:plus-fill"}),onClick:C,children:"Konversi"})]}),badgeCount:S}),(0,M.jsx)(Zn,{showConversionStockModal:v,showConversionStockModalHandler:C,closeConversionStockModalHandler:function(){x(!1)},showTransactionStockModal:f,closeTransactionStockModalHandler:function(){Z(!1)},setTotalStock:m,setRefetchStockHistory:w,refetchStockHistory:b}),(0,M.jsx)(a.Z,{sx:{marginTop:"30px"}}),(0,M.jsx)(Cn,{refetchStockHistory:b})]})})}},42480:function(){}}]);
//# sourceMappingURL=707.16885cbf.chunk.js.map